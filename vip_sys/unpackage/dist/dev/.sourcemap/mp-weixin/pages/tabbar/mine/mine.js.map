{"version":3,"sources":["uni-app:///main.js","webpack:///E:/0honoka/vip_sys/pages/tabbar/mine/mine.vue?877a","webpack:///E:/0honoka/vip_sys/pages/tabbar/mine/mine.vue?378d","webpack:///E:/0honoka/vip_sys/pages/tabbar/mine/mine.vue?9632","webpack:///E:/0honoka/vip_sys/pages/tabbar/mine/mine.vue?d750","uni-app:///pages/tabbar/mine/mine.vue","webpack:///E:/0honoka/vip_sys/pages/tabbar/mine/mine.vue?d858","webpack:///E:/0honoka/vip_sys/pages/tabbar/mine/mine.vue?837f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","windowHeight","windowWidth","pixelRatio","swiperHeight","accountHeight","detailHeight","bannerList","userType","accountOpt","optionList","optionIndex","codeUrl","shopName","userMark","vipState","onLoad","_this","onShow","onPullDownRefresh","methods","bannerClick","uni","url","accountClick","title","content","showCancel","itemList","success","editable","placeholderText","userOrderClick","vipType","showVipList","initView","getBannerList","method","type","setCheckData","confirmText","setOpenData","logoutClick","checkLogin","cancelText","checkCookie","user_phone","time_stamp","getAccountOpt","getUserInfo","getHostInfo","getUserVipInfo","vip_type","wallet","getWriteOffQR","shop_name","user_mark","qr_count","fail","openUserVip","user_wallet","openTypeOfCountVip","openShopPayVip","scanQRCode","onlyFromCamera","scanType","res","mkWriteOffOrder","card_user","total_fee","writeOffOrderByPhone","getUserWallet","unit","mkOrderByPhone","write_off_fee","getUserWalletThenReg","reOpenVip","closeVIP","surportClick"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACc;;;AAGjE;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAgnB,CAAgB,8mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;AC+EpoB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFA;AAAA,eAGA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;IACAA;IACAA;IACAA;EACA;EACAC;IACAD;EACA;EACAE;IACAF;EACA;EACAG;IACAC;MACA;QACAC;UACAC;QACA;MACA;IACA;IACAC;MACAP;MACA;QACAA;QACAK;UACAG;QACA;QACA;UACAR;QACA;UACAA;QACA;MACA;QACA;UACA;YACAK;cACAG;cACAC;cACAC;YACA;YACA;UACA;UACAV;UACAK;YACAG;UACA;UACAR;QACA;UACAA;QACA;MACA;QACA;UACA;YACAK;cACAG;cACAC;cACAC;YACA;YACA;UACA;UACAV;UACAK;YACAG;UACA;UACAR;QACA;UACAA;QACA;MACA;QACA;UACA;YACAK;cACAG;cACAC;cACAC;YACA;YACA;UACA;UACAV;UACAK;YACAG;UACA;UACAR;QACA;UACAK;YACAG;YACAG;YACAC;cACA;gBACAZ;cACA;gBACAK;kBACAG;kBACAK;kBACAC;kBACAF;oBACA;sBACA;sBACA;wBACAZ;sBACA;wBACAK;0BACAG;wBACA;sBACA;oBACA;kBACA;gBACA;cACA;YACA;UACA;QACA;MACA;QACAH;UACAC;QACA;MACA;IACA;IACAS;MACA;MACA;QACAC;MACA;QACAA;MACA;QACAA;MACA;MACAX;QACAC;MACA;IACA;IACAW;MACAZ;QACAG;QACAG;QACAC;UACA;UACAP;YACAC;UACA;QACA;MACA;IACA;IACAY;MACA;MACAlB;MACAA;MACAA;MACAA;MACAA;IACA;IACAmB;MACAd;QACAC;QACAc;QACArC;UACAsC;QACA;QACAT;UACAZ;QACA;MACA;IACA;IACAsB;MACAjB;QACAG;QACAG;QACAC;UACA;UACA;UACAP;YACAG;YACAK;YACAC;YACAS;YACAX;cACA;gBACA;gBACA;kBACAP;oBACAC;kBACA;gBACA;kBACAD;oBACAG;kBACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAgB;MACAnB;QACAG;QACAG;QACAC;UACA;UACA;UACA;YACAZ;UACA;YACAA;UACA;QACA;MACA;IACA;IACAyB;MACApB;MACAA;MACAA;QACAC;MACA;IACA;IACA;IACAoB;MACA;MACA;MACA;QACArB;UACAG;UACAC;UACAc;UACAI;UACAf;YACA;cACAP;gBACAC;cACA;YACA;cACAD;gBACAC;cACA;YACA;UACA;QACA;MACA;QACAN;MACA;IACA;IACA4B;MACAvB;QACAC;QACAc;QACArC;UACAsC;UACAQ;UACAC;QACA;QACAlB;UACA;YACAP;cACAG;cACAC;cACAC;cACAE;gBACAP;gBACAA;gBACAA;kBACAC;gBACA;cACA;YACA;UACA;YACAN;UACA;QACA;MACA;IACA;IACA+B;MACA1B;QACAC;QACAc;QACArC;UACAsC;QACA;QACAT;UACA;YACAZ;UACA;YACAA;UACA;QACA;MACA;IACA;IACAgC;MACA3B;QACAC;QACAc;QACArC;UACAsC;UACAQ;QACA;QACAjB;UACAP;UACAA;UACA;YACAL;YACA;cACAA;cACAA;cACA;gBACAA;cACA;gBACAA;cACA;cACA;gBACAA;cACA;gBACAA;cACA;cACA;gBACAA;cACA;gBACAA;cACA;YACA;cACAA;YACA;YACAA;UACA;YACAK;cACAG;cACAC;cACAC;cACAE;gBACAZ;cACA;YACA;UACA;QACA;MACA;IACA;IACAiC;MACA5B;QACAC;QACAc;QACArC;UACAsC;UACAQ;QACA;QACAjB;UACAP;UACA;YACAL;YACAA;YACAA;YACAA;UACA;YACAK;cACAG;cACAC;cACAC;cACAE;gBACAZ;cACA;YACA;UACA;QACA;MACA;IACA;IACAkC;MACA7B;QACAC;QACAc;QACArC;UACAsC;UACAc;UACAN;QACA;QACAjB;UACA;YACAP;YACAL;YACAA;YACA;YACA;cACAoC;cACApC;YACA;cACAoC;cACApC;YACA;YAAA;cACAoC;cACApC;YACA;UACA;YACAK;cACAG;cACAC;cACAC;YACA;UACA;QACA;MACA;IACA;IACA2B;MACA;QACAhB;QACAiB;QACAC;QACAV;QACAM;QACAK;MACA;MACAzD;MACA;MACAsB;QACAC;QACAvB;UACAsC;UACAtC;QACA;QACAqC;QACAR;UACAZ;QACA;QACAyC;UACApC;YACAG;UACA;QACA;MACA;IACA;IACAkC;MACArC;QACAC;QACAc;QACArC;UACAsC;UACAQ;UACAc;UACAJ;QACA;QACA3B;UACA;YACAP;cACAG;cACAC;cACAC;YACA;UACA;YACA;cACAL;gBACAG;gBACAC;gBACAc;gBACAX;kBACA;oBACAZ;kBACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACA4C;MACAvC;QACAG;QACAK;QACAC;QACAS;QACAX;UACA;YACA;YACA;cACAP;gBACAG;gBACAK;gBACAC;gBACAS;gBACAX;kBACA;oBACA;oBACA;sBACA+B;sBACAtC;wBACAG;wBACAK;wBACAC;wBACAS;wBACAX;0BACA;4BACA;4BACA;8BACAP;gCACAG;8BACA;4BACA;8BACAR;4BACA;0BACA;wBACA;sBACA;oBACA;kBACA;gBACA;cACA;YACA;cACAK;gBACAG;cACA;YACA;UACA;QACA;MACA;IACA;IACAqC;MACAxC;QACAG;QACAK;QACAC;QACAS;QACAX;UACA;YACA;YACA;cACAP;gBACAG;gBACAK;gBACAC;gBACAS;gBACAX;kBACA;oBACA;oBACA;sBACA+B;sBACAtC;wBACAG;wBACAK;wBACAC;wBACAS;wBACAX;0BACA;4BACA;4BACA;8BACAP;gCACAG;8BACA;4BACA;8BACAR;4BACA;0BACA;wBACA;sBACA;oBACA;kBACA;gBACA;cACA;YACA;cACAK;gBACAG;cACA;YACA;UACA;QACA;MACA;IACA;IACAsC;MACAzC;QACA0C;QACAC;QACApC;UACA;UACAqC;UACAA;UACA;UACA;UACA;UACA;UACA;UACA;YACA5C;cACAG;cACAC;cACAC;YACA;YACA;UACA;UAEA;YACAL;cACAG;cACAK;cACAC;cACAS;cACAX;gBACA;kBACA;kBACA;oBACAZ;kBACA;oBACAA;kBACA;gBACA;cACA;YACA;UACA;YACAK;cACAG;cACAK;cACAC;cACAS;cACAX;gBACA;kBACA;kBACA;oBACAZ;kBACA;oBACAA;kBACA;gBACA;cACA;YACA;UACA;YACAK;cACAG;cACAK;cACAC;cACAS;cACAX;gBACA;kBACA;kBACA+B;kBACA;oBACAtC;sBACAG;sBACAK;sBACAC;sBACAS;sBACAX;wBACA;0BACA;0BACA;4BACAZ;0BACA;4BACAA;0BACA;wBACA;sBACA;oBACA;kBACA;oBACAK;sBACAG;oBACA;kBACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACA0C;MACA7C;QACAG;MACA;MACAH;QACAC;QACAc;QACArC;UACAsC;UACAQ;UACAW;UACAW;UACAC;QACA;QACAxC;UACAP;UACA;YACAA;cACAG;cACAC;cACAC;cACAE;gBACA;kBACA;oBACAZ;kBACA;gBACA;kBACA;oBACAA;kBACA;gBACA;cACA;YACA;UACA;YACAK;cACAG;cACAC;cACAC;YACA;UACA;QACA;MACA;IACA;IACA2C;MACAhD;QACAG;QACAG;QACAC;UACA;UACAZ;QACA;MACA;IACA;IACAsD;MACA;MACA;MACA;QACA9C;QACA+C;MACA;QACA/C;QACA+C;MACA;QACA/C;QACA+C;MACA;MACAlD;QACAC;QACAc;QACArC;UACAsC;UACAc;UACAN;QACA;QACAjB;UACA;YACAP;cACAG;cACAK;cACAC;cACAF;gBACA;kBACA;oBACA;oBACAP;sBACAG;sBACAK;sBACAC;sBACAF;wBACA;0BACA;4BACAZ;0BACA;0BACAA;wBACA;sBACA;oBACA;kBACA;gBACA;cACA;YACA;UACA;YACAK;cACAG;cACAC;cACAC;YACA;UACA;QACA;MACA;IACA;IACA8C;MACAnD;QACAC;QACAc;QACArC;UACAsC;UACAc;UACAN;UACA4B;UACAN;QACA;QACAvC;UACA;YACAP;cACAG;cACAC;cACAC;YACA;UACA;YACAL;cACAG;cACAC;cACAC;YACA;UACA;QACA;MACA;IACA;IACAgD;MACA;MACA;QACAlD;MACA;QACAA;MACA;QACAA;MACA;MACAH;QACAC;QACAc;QACArC;UACAsC;UACAc;UACAN;QACA;QACAjB;UACA;YACA+B;YACA3C;UACA;YACAK;cACAG;cACAC;cACAC;YACA;UACA;QACA;MACA;IACA;IACAiD;MACAtD;QACAC;QACAc;QACArC;UACAsC;UACAc;UACAN;UACAc;QACA;QACA/B;UACA;YACAP;cACAG;cACAC;cACAC;YACA;UACA;YACAL;cACAG;cACAC;cACAC;YACA;UACA;QACA;MACA;IACA;IACAkD;MACAvD;QACAC;QACAc;QACArC;UACAsC;UACAc;UACAN;QACA;QACAjB;UACAP;YACAG;YACAC;YACAC;UACA;QACA;MACA;IACA;IACAmD;MACAxD;QACAG;QACAC;QACAC;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACr9BA;AAAA;AAAA;AAAA;AAAuqC,CAAgB,6lCAAG,EAAC,C;;;;;;;;;;;ACA3rC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/tabbar/mine/mine.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/tabbar/mine/mine.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./mine.vue?vue&type=template&id=2d754997&\"\nvar renderjs\nimport script from \"./mine.vue?vue&type=script&lang=js&\"\nexport * from \"./mine.vue?vue&type=script&lang=js&\"\nimport style0 from \"./mine.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/tabbar/mine/mine.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./mine.vue?vue&type=template&id=2d754997&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./mine.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./mine.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\" :style=\"{height:windowHeight + 'rpx'}\">\r\n\t\t<view class=\"swiper-body\" :style=\"{height:swiperHeight + 'rpx'}\">\r\n\t\t\t<swiper class=\"swiper-view\" :indicator-dots=\"true\" :autoplay=\"true\" :interval=\"5000\" :duration=\"500\">\r\n\t\t\t\t<swiper-item v-for=\"(item,index) in bannerList['img']\" :key=\"item\" @click=\"bannerClick(index)\">\r\n\t\t\t\t\t<image class=\"swiper-item-img\" :src=\"item\" mode=\"widthFix\"></image>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t</view>\r\n\t\t<!-- <view class=\"board-view\">\r\n\t\t\t<view class=\"laba-view\">\r\n\t\t\t\t<image class=\"laba-image\" src=\"../../../static/laba.png\" mode=\"\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"text-view\">\r\n\t\t\t\t注意：腊、二月，剪发卡会员一律不可使用\r\n\t\t\t</view>\r\n\t\t</view> -->\r\n\t\t<view class=\"account-option\">\r\n\t\t\t<view class=\"item-view\" v-for=\"(item,index) in accountOpt\" :key=\"item['title']\" @click=\"accountClick(index)\">\r\n\t\t\t\t<image class=\"image\" :src=\"item['img_url']\" mode=\"\"></image>\r\n\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t{{item['title']}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"account-detial\" :style=\"{height:accountHeight + 'rpx'}\">\r\n\t\t\t<scroll-view class=\"scroll-view\" :style=\"{height:accountHeight + 'rpx'}\" scroll-y=\"true\" >\r\n\t\t\t\t<view class=\"scroll-content\">\r\n\t\t\t\t\t<view class=\"item-view\"  v-for=\"(item,key,index) in optionList\" :key=\"item\">\r\n\t\t\t\t\t\t<view class=\"item-title\">\r\n\t\t\t\t\t\t\t{{key}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"item-value\">\r\n\t\t\t\t\t\t\t{{item}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-view\" v-if=\"userType=='东东发艺会员' && optionIndex!=0\">\r\n\t\t\t\t\t\t<view class=\"item-title\">\r\n\t\t\t\t\t\t\t消费记录\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"item-value\" style=\"text-decoration:underline;color: blue;\" @click=\"userOrderClick(optionIndex)\">\r\n\t\t\t\t\t\t\t点击查看\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"qr-code-view\"  v-if=\"userType=='东东发艺会员' && optionIndex!=0\">\r\n\t\t\t\t\t\t<view class=\"qr-show-title\">\r\n\t\t\t\t\t\t\t码上享会员\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<image class=\"qr-code\" :src=\"codeUrl\" mode=\"\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-view\" v-if=\"userType=='店主'\">\r\n\t\t\t\t\t\t<view class=\"item-title\">\r\n\t\t\t\t\t\t\t会员列表\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"item-value\" style=\"text-decoration:underline;color: blue;\" @click=\"showVipList\">\r\n\t\t\t\t\t\t\t点击查看\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"abort-us-view\" v-if=\"optionIndex==0\" @click=\"surportClick\">\r\n\t\t\t\t\t\t<view class=\"surport-title\">\r\n\t\t\t\t\t\t\t点击获取技术支持\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"surport-com\">\r\n\t\t\t\t\t\t\t曲阳脑元素网络科技有限公司\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"logout-view\" v-if=\"userType=='店主' || (userType!='店主' && optionIndex==0)\">\r\n\t\t\t\t\t\t<view class=\"logout-action\" @click=\"logoutClick\">\r\n\t\t\t\t\t\t\t退出登录\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tvar _this\r\n\timport AES from '@/common/ar-aes.js'\r\n\timport Units from '@/common/Units.js'\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\twindowHeight: 0,\r\n\t\t\t\twindowWidth:750,\r\n\t\t\t\tpixelRatio:0,\r\n\t\t\t\tswiperHeight:0,\r\n\t\t\t\taccountHeight:0,\r\n\t\t\t\tdetailHeight:0,\r\n\t\t\t\t\r\n\t\t\t\tbannerList:{},\r\n\t\t\t\tuserType:'',\r\n\t\t\t\taccountOpt:[],\r\n\t\t\t\toptionList:{},\r\n\t\t\t\toptionIndex:0,\r\n\t\t\t\tcodeUrl:'',\r\n\t\t\t\tshopName:'',\r\n\t\t\t\tuserMark:'',\r\n\t\t\t\tvipState:[],\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t_this = this\r\n\t\t\t_this.shopName = \"东东发艺\"\r\n\t\t\t_this.initView()\r\n\t\t\t_this.getBannerList()\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\t_this.checkLogin()\r\n\t\t},\r\n\t\tonPullDownRefresh() {\r\n\t\t\t_this.checkLogin()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tbannerClick(index){\r\n\t\t\t\tif(_this.deskTop['bannerList']['action'][index]!=\"\"){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:\"/pages/detail/detail?name=活动详情&url=\" + _this.deskTop['bannerList']['action'][index]\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taccountClick(index){\r\n\t\t\t\t_this.optionIndex = index\r\n\t\t\t\tif(_this.optionIndex==0){\r\n\t\t\t\t\t_this.optionList = {}\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle:'正在加载...'\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif(_this.userType !='店主'){\r\n\t\t\t\t\t\t_this.getUserInfo(uni.getStorageSync('phone'))\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_this.getHostInfo(uni.getStorageSync('phone'))\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(_this.optionIndex==1){\r\n\t\t\t\t\tif(_this.userType !='店主'){\r\n\t\t\t\t\t\tif(!_this.vipState[_this.optionIndex - 1]){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"温馨提示\",\r\n\t\t\t\t\t\t\t\tcontent:\"您尚未未开通剪发卡，请先开通剪发卡\",\r\n\t\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.optionList = {}\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle:'正在加载...'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t_this.getUserVipInfo('hair_cut',uni.getStorageSync('phone'))\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_this.setOpenData()\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(_this.optionIndex==2){\r\n\t\t\t\t\tif(_this.userType !='店主'){\r\n\t\t\t\t\t\tif(!_this.vipState[_this.optionIndex - 1]){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"温馨提示\",\r\n\t\t\t\t\t\t\t\tcontent:\"您尚未未开通头疗卡，请先开通头疗卡\",\r\n\t\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.optionList = {}\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle:'正在加载...'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t_this.getUserVipInfo('head_health',uni.getStorageSync('phone'))\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_this.setCheckData()\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(_this.optionIndex==3){\r\n\t\t\t\t\tif(_this.userType !='店主'){\r\n\t\t\t\t\t\tif(!_this.vipState[_this.optionIndex - 1]){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"温馨提示\",\r\n\t\t\t\t\t\t\t\tcontent:\"您尚未未开通消费卡，请先开通消费卡\",\r\n\t\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_this.optionList = {}\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle:'正在加载...'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t_this.getUserVipInfo('shop_pay',uni.getStorageSync('phone'))\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\t\t\ttitle:\"请选择核销方式\",\r\n\t\t\t\t\t\t\titemList:[\"扫一扫\",\"手机号\"],\r\n\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\tif(e.tapIndex==0){\r\n\t\t\t\t\t\t\t\t\t_this.scanQRCode()\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\ttitle:\"请输入手机号\",\r\n\t\t\t\t\t\t\t\t\t\teditable:true,\r\n\t\t\t\t\t\t\t\t\t\tplaceholderText:\"请输入会员手机号\",\r\n\t\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet user_phone = e.content\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(Units.isNumber(user_phone) && user_phone!=\"\" && user_phone.length==11){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_this.writeOffOrderByPhone(user_phone)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle:\"手机号格式错误...\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(_this.optionIndex==4){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:\"/pages/pagemanager/pagemanager\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tuserOrderClick(optionIndex){\r\n\t\t\t\tlet vipType = ''\r\n\t\t\t\tif(_this.optionIndex==1){\r\n\t\t\t\t\tvipType = 'hair_cut'\r\n\t\t\t\t}else if(_this.optionIndex==2){\r\n\t\t\t\t\tvipType = 'head_health'\r\n\t\t\t\t}else if(_this.optionIndex==3){\r\n\t\t\t\t\tvipType = 'shop_pay'\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'/pages/orderlist/orderlist?vip_type=' + vipType + '&user_phone=' + uni.getStorageSync('phone')\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tshowVipList(){\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\ttitle:\"请选择会员类型\",\r\n\t\t\t\t\titemList:['剪发卡','头疗卡','消费卡'],\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tlet type = ['hair_cut','head_health','shop_pay']\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl:'/pages/viplistpage/viplistpage?vip_type=' + type[e.tapIndex]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitView(){\r\n\t\t\t\tlet info = uni.getSystemInfoSync()\r\n\t\t\t\t_this.pixelRatio = info.windowWidth / _this.windowWidth\r\n\t\t\t\t_this.windowHeight = info.windowHeight * _this.pixelRatio\r\n\t\t\t\t_this.swiperHeight = 400*750/1024\r\n\t\t\t\t_this.accountHeight = _this.windowHeight - _this.swiperHeight - 160 - 20\r\n\t\t\t\t_this.detailHeight = _this.accountHeight - 80 - 20//_this.windowHeight - _this.swiperHeight - 200 - 80 - 30\r\n\t\t\t},\r\n\t\t\tgetBannerList(){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl +  \"API/userAPI/userAPI.php\",\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:'get_UI'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t_this.bannerList = e.data['bannerList']\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsetCheckData(){\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\ttitle:'请选择会员类型',\r\n\t\t\t\t\titemList:['剪发卡','头疗卡','消费卡'],\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tlet type = ['hair_cut','head_health','shop_pay']\r\n\t\t\t\t\t\tlet vip_type = type[e.tapIndex]\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle:'请输入会员手机号',\r\n\t\t\t\t\t\t\teditable:true,\r\n\t\t\t\t\t\t\tplaceholderText:'请输入会员手机号',\r\n\t\t\t\t\t\t\tconfirmText:'查询',\r\n\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\t\tlet content = e.content\r\n\t\t\t\t\t\t\t\t\tif(Units.isNumber(content) && content.length==11){\r\n\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\turl:'/pages/orderlist/orderlist?vip_type=' + vip_type + '&&user_phone=' + content\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle:'手机号输入错误...'\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsetOpenData(){\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\ttitle:'请选择会员类型',\r\n\t\t\t\t\titemList:['剪发卡','头疗卡','消费卡'],\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tlet type = ['hair_cut','head_health','shop_pay']\r\n\t\t\t\t\t\tlet vip_type = type[e.tapIndex]\r\n\t\t\t\t\t\tif(e.tapIndex<2){\r\n\t\t\t\t\t\t\t_this.openTypeOfCountVip(vip_type)\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_this.openShopPayVip(vip_type)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tlogoutClick(){\r\n\t\t\t\tuni.setStorageSync('phone','')\r\n\t\t\t\tuni.setStorageSync('login_stamp','')\r\n\t\t\t\tuni.switchTab({\r\n\t\t\t\t\turl: '/pages/tabbar/index/index'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// =============以下是按顺序的登录过程===================\r\n\t\t\tcheckLogin(){\r\n\t\t\t\tlet phone = uni.getStorageSync('phone')\r\n\t\t\t\tlet timeStamp = uni.getStorageSync('login_stamp')\r\n\t\t\t\tif(phone==\"\" || timeStamp==\"\"){\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle:\"温馨提示\",\r\n\t\t\t\t\t\tcontent:\"您尚未登录请先登录，是否立即登录？\",\r\n\t\t\t\t\t\tconfirmText:\"立即登录\",\r\n\t\t\t\t\t\tcancelText:\"暂不登录\",\r\n\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\turl:\"/pages/login/login\"\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}else if(e.cancel==true){\r\n\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\turl:\"/pages/tabbar/index/index\"\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\t_this.checkCookie(phone,timeStamp)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcheckCookie(phone,stamp){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl + \"API/userAPI/userAPI.php\",\r\n\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:\"check_cookie\",\r\n\t\t\t\t\t\tuser_phone:phone, \r\n\t\t\t\t\t\ttime_stamp:stamp\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tif(e.data.result==false){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"温馨提示\",\r\n\t\t\t\t\t\t\t\tcontent:\"账号未登录或登录已过期，请重新登录\",\r\n\t\t\t\t\t\t\t\tshowCancel:false,\r\n\t\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('phone','')\r\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('login_stamp','')\r\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\turl: '/pages/login/login',\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_this.getUserInfo(uni.getStorageSync('phone'))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetAccountOpt(){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl +  \"API/userAPI/userAPI.php\",\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:'get_account_opt'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tif(_this.userType==\"店主\"){\r\n\t\t\t\t\t\t\t_this.accountOpt = e.data['host']\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_this.accountOpt = e.data['user']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetUserInfo(phone){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl + \"API/userAPI/userAPI.php\",\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:'check_user',\r\n\t\t\t\t\t\tuser_phone:phone\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tuni.stopPullDownRefresh()\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tif(e.data['result']==true){\r\n\t\t\t\t\t\t\t_this.userType = e.data['info']['用户类型']\r\n\t\t\t\t\t\t\tif(_this.userType!='店主'){\r\n\t\t\t\t\t\t\t\t_this.optionList = e.data['info']\r\n\t\t\t\t\t\t\t\t_this.userMark = _this.optionList['用户姓名']\r\n\t\t\t\t\t\t\t\tif(_this.optionList['剪发卡']=='已开通'){\r\n\t\t\t\t\t\t\t\t\t_this.vipState[0] = true\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t_this.vipState[0] = false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(_this.optionList['头疗卡']=='已开通'){\r\n\t\t\t\t\t\t\t\t\t_this.vipState[1] = true\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t_this.vipState[1] = false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif(_this.optionList['消费卡']=='已开通'){\r\n\t\t\t\t\t\t\t\t\t_this.vipState[2] = true\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t_this.vipState[2] = false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t_this.getHostInfo(uni.getStorageSync('phone'))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_this.getAccountOpt()\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:'错误！',\r\n\t\t\t\t\t\t\t\tcontent:'获取用户信息失败，点击重试',\r\n\t\t\t\t\t\t\t\tshowCancel:false,\r\n\t\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t\t_this.getUserInfo(uni.getStorageSync('phone'))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetHostInfo(phone){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl + \"API/userAPI/userAPI.php\",\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:'check_host',\r\n\t\t\t\t\t\tuser_phone:phone\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tif(e.data['result']==true){\r\n\t\t\t\t\t\t\t_this.userType = e.data['info']['用户类型']\r\n\t\t\t\t\t\t\t_this.optionList = e.data['info']\r\n\t\t\t\t\t\t\t_this.userMark = _this.optionList['用户姓名']\r\n\t\t\t\t\t\t\t_this.getAccountOpt()\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:'错误！',\r\n\t\t\t\t\t\t\t\tcontent:'获取用户信息失败，点击重试',\r\n\t\t\t\t\t\t\t\tshowCancel:false,\r\n\t\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t\t_this.getHostInfo(uni.getStorageSync('phone'))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetUserVipInfo(vipType,phone){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl + \"API/userAPI/userAPI.php\",\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:'get_user_vip_info',\r\n\t\t\t\t\t\tvip_type:vipType,\r\n\t\t\t\t\t\tuser_phone:phone\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tif(e.data['result']==true){\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t_this.userType = e.data['info']['用户类型']\r\n\t\t\t\t\t\t\t_this.optionList = e.data['info']\r\n\t\t\t\t\t\t\tlet wallet = _this.optionList['余额']\r\n\t\t\t\t\t\t\tif(_this.optionIndex==1){\r\n\t\t\t\t\t\t\t\twallet = parseInt(wallet.split('次')[0])\r\n\t\t\t\t\t\t\t\t_this.getWriteOffQR('hair_cut',wallet)\r\n\t\t\t\t\t\t\t}else if(_this.optionIndex==2){\r\n\t\t\t\t\t\t\t\twallet = parseInt(wallet.split('次')[0])\r\n\t\t\t\t\t\t\t\t_this.getWriteOffQR('head_health',wallet)\r\n\t\t\t\t\t\t\t}if(_this.optionIndex==3){\r\n\t\t\t\t\t\t\t\twallet = parseFloat(wallet.split('元')[0])\r\n\t\t\t\t\t\t\t\t_this.getWriteOffQR('shop_pay',wallet)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:'错误！',\r\n\t\t\t\t\t\t\t\tcontent:'获取用户信息失败,请稍后再试',\r\n\t\t\t\t\t\t\t\tshowCancel:false,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetWriteOffQR(vipType,QrCount){\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\t\ttype:\"join_code\",\r\n\t\t\t\t\t\t\t\tshop_name:_this.shopName,\r\n\t\t\t\t\t\t\t\tuser_mark:_this.userMark,\r\n\t\t\t\t\t\t\t\tuser_phone:uni.getStorageSync('phone'),\r\n\t\t\t\t\t\t\t\tvip_type:vipType,\r\n\t\t\t\t\t\t\t\tqr_count:QrCount\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\tdata = JSON.stringify(data)\r\n\t\t\t\tlet r = AES.AES.encrypt(data,'1234567891234567','1234567891234567')\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl + \"API/QRCode/codeAPI.php\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:\"mk_vip_qr\",\r\n\t\t\t\t\t\tdata:r\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t_this.codeUrl = e.data\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle:\"请求失败！\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\topenUserVip(vip_type,user_phone,user_wallet,user_mark){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl + \"API/userAPI/userAPI.php\",\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:vip_type,\r\n\t\t\t\t\t\tuser_phone:user_phone,\r\n\t\t\t\t\t\tuser_wallet:user_wallet,\r\n\t\t\t\t\t\tuser_mark:user_mark\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tif(e.data['result']==true){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"恭喜\",\r\n\t\t\t\t\t\t\t\tcontent:e.data['info'],\r\n\t\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(e.data['info']=='已开通'){\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle:\"警告\",\r\n\t\t\t\t\t\t\t\t\tcontent:'该用户已经是该类型的会员，是否追加开通',\r\n\t\t\t\t\t\t\t\t\tconfirmText:'继续开通',\r\n\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\t\t\t\t_this.getUserWalletThenReg(vip_type,user_phone,user_wallet)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\topenTypeOfCountVip(vip_type){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle:'请输入手机号',\r\n\t\t\t\t\teditable:true,\r\n\t\t\t\t\tplaceholderText:'请输入会员手机号',\r\n\t\t\t\t\tconfirmText:'下一步',\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\tlet user_phone = e.content\r\n\t\t\t\t\t\t\tif(Units.isNumber(user_phone) && user_phone.length==11){\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle:'请输入次数',\r\n\t\t\t\t\t\t\t\t\teditable:true,\r\n\t\t\t\t\t\t\t\t\tplaceholderText:'请输入次数',\r\n\t\t\t\t\t\t\t\t\tconfirmText:'下一步',\r\n\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\t\t\t\tlet user_wallet = e.content\r\n\t\t\t\t\t\t\t\t\t\t\tif(Units.isNumber(user_wallet)){\r\n\t\t\t\t\t\t\t\t\t\t\t\tuser_wallet = parseFloat(user_wallet)\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle:'请输入备注',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable:true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholderText:'请输入会员姓名',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconfirmText:'确认开通',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet user_mark = e.content\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(user_mark==\"\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle:'姓名输入错误'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_this.openUserVip(vip_type,user_phone,user_wallet,user_mark)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle:'手机号输入错误...'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\topenShopPayVip(vip_type){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle:'请输入手机号',\r\n\t\t\t\t\teditable:true,\r\n\t\t\t\t\tplaceholderText:'请输入会员手机号',\r\n\t\t\t\t\tconfirmText:'下一步',\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\tlet user_phone = e.content\r\n\t\t\t\t\t\t\tif(Units.isNumber(user_phone) && user_phone.length==11){\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle:'请输入金额',\r\n\t\t\t\t\t\t\t\t\teditable:true,\r\n\t\t\t\t\t\t\t\t\tplaceholderText:'请输入充值金额',\r\n\t\t\t\t\t\t\t\t\tconfirmText:'下一步',\r\n\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\t\t\t\tlet user_wallet = e.content\r\n\t\t\t\t\t\t\t\t\t\t\tif(Units.isNumber(user_wallet)){\r\n\t\t\t\t\t\t\t\t\t\t\t\tuser_wallet = parseFloat(user_wallet)\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle:'请输入备注',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teditable:true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholderText:'请输入会员姓名',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconfirmText:'确认开通',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet user_mark = e.content\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(user_mark==\"\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle:'姓名输入错误'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_this.openUserVip(vip_type,user_phone,user_wallet,user_mark)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle:'手机号输入错误...'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tscanQRCode(){\r\n\t\t\t\tuni.scanCode({\r\n\t\t\t\t\tonlyFromCamera: true,\r\n\t\t\t\t\tscanType: [\"qrCode\"],\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tlet res = e.result\r\n\t\t\t\t\t\tres = AES.AES.decrypt(res,'1234567891234567','1234567891234567')\r\n\t\t\t\t\t\tres = JSON.parse(res)\r\n\t\t\t\t\t\tlet type = res.vip_type\r\n\t\t\t\t\t\tlet shop_name = res.shop_name\r\n\t\t\t\t\t\tlet user_phone = res.user_phone\r\n\t\t\t\t\t\tlet qr_count = res.qr_count\r\n\t\t\t\t\t\tlet user_mark = res.user_mark\r\n\t\t\t\t\t\tif(shop_name!=_this.shopName){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"错误！\",\r\n\t\t\t\t\t\t\t\tcontent:\"此二维码不是本店会员专用二维码！\",\r\n\t\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(type==\"hair_cut\"){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"剪发卡核销\",\r\n\t\t\t\t\t\t\t\teditable:true,\r\n\t\t\t\t\t\t\t\tplaceholderText:\"请输入用卡人姓名/备注\",\r\n\t\t\t\t\t\t\t\tconfirmText:\"立即核销\",\r\n\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\t\t\tlet user_mark = e.content\r\n\t\t\t\t\t\t\t\t\t\tif(user_mark==''){\r\n\t\t\t\t\t\t\t\t\t\t\t_this.mkWriteOffOrder(type,user_phone,qr_count,_this.userMark)\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t_this.mkWriteOffOrder(type,user_phone,qr_count,user_mark)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else if(type==\"head_health\"){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"头疗卡核销\",\r\n\t\t\t\t\t\t\t\teditable:true,\r\n\t\t\t\t\t\t\t\tplaceholderText:\"请输入用卡人姓名/备注\",\r\n\t\t\t\t\t\t\t\tconfirmText:\"立即核销\",\r\n\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\t\t\tlet user_mark = e.content\r\n\t\t\t\t\t\t\t\t\t\tif(user_mark==''){\r\n\t\t\t\t\t\t\t\t\t\t\t_this.mkWriteOffOrder(type,user_phone,qr_count,_this.userMark)\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t_this.mkWriteOffOrder(type,user_phone,qr_count,user_mark)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else if(type==\"shop_pay\"){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"消费卡核销第一步\",\r\n\t\t\t\t\t\t\t\teditable:true,\r\n\t\t\t\t\t\t\t\tplaceholderText:\"请输入本次消费金额\",\r\n\t\t\t\t\t\t\t\tconfirmText:\"下一步\",\r\n\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\t\t\tlet user_wallet = e.content\r\n\t\t\t\t\t\t\t\t\t\tuser_wallet = parseFloat(user_wallet)\r\n\t\t\t\t\t\t\t\t\t\tif(Units.isNumber(user_wallet)){\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle:\"消费卡核销第二步\",\r\n\t\t\t\t\t\t\t\t\t\t\t\teditable:true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholderText:\"请输入用卡人姓名/备注\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tconfirmText:\"立即核销\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet user_mark = e.content\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(user_mark==''){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_this.mkWriteOffOrder(type,user_phone,qr_count,_this.userMark,user_wallet)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_this.mkWriteOffOrder(type,user_phone,qr_count,user_mark,user_wallet)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle:\"金额输入错误...\"\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tmkWriteOffOrder(vip_type,user_phone,qr_count,card_user,total_fee){\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle:\"正在核销...\"\r\n\t\t\t\t})\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl + \"API/userOrder/orderAPI.php\",\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:vip_type,\r\n\t\t\t\t\t\tuser_phone:user_phone,\r\n\t\t\t\t\t\tqr_count:qr_count,\r\n\t\t\t\t\t\tcard_user:card_user,\r\n\t\t\t\t\t\ttotal_fee:total_fee\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tif(e.data['result']==true){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:'核销成功',\r\n\t\t\t\t\t\t\t\tcontent:e.data['info'],\r\n\t\t\t\t\t\t\t\tshowCancel:false,\r\n\t\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t\tif(vip_type!='shop_pay'){\r\n\t\t\t\t\t\t\t\t\t\tif(qr_count==1){\r\n\t\t\t\t\t\t\t\t\t\t\t_this.closeVIP(vip_type,user_phone)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tif(qr_count-total_fee==0){\r\n\t\t\t\t\t\t\t\t\t\t\t_this.closeVIP(vip_type,user_phone)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:'核销失败！',\r\n\t\t\t\t\t\t\t\tcontent:e.data['info'],\r\n\t\t\t\t\t\t\t\tshowCancel:false,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\twriteOffOrderByPhone(user_phone){\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\ttitle:\"请选择会员类型\",\r\n\t\t\t\t\titemList:[\"剪发卡\",\"头疗卡\",\"消费卡\"],\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tlet vipArray = ['hair_cut','head_health','shop_pay']\r\n\t\t\t\t\t\t_this.getUserWallet(vipArray[e.tapIndex],user_phone)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetUserWallet(vip_type,user_phone){\r\n\t\t\t\tlet title = \"\"\r\n\t\t\t\tlet unit = \"\"\r\n\t\t\t\tif(vip_type=='hair_cut'){\r\n\t\t\t\t\ttitle = \"请输入剪发次数\"\r\n\t\t\t\t\tunit = \"次\"\r\n\t\t\t\t}else if(vip_type=='head_health'){\r\n\t\t\t\t\ttitle = \"请输入头疗次数\"\r\n\t\t\t\t\tunit = \"次\"\r\n\t\t\t\t}else if(vip_type=='shop_pay'){\r\n\t\t\t\t\ttitle = \"请输入消费金额\"\r\n\t\t\t\t\tunit = \"元\"\r\n\t\t\t\t}\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl + \"API/userAPI/userAPI.php\",\r\n\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:\"user_wallet\",\r\n\t\t\t\t\t\tvip_type:vip_type,\r\n\t\t\t\t\t\tuser_phone:user_phone\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tif(e.data['result']==true){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"当前余额\" + e.data['info'] + unit,\r\n\t\t\t\t\t\t\t\teditable:true,\r\n\t\t\t\t\t\t\t\tplaceholderText:title,\r\n\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\t\t\tif(e.content!=\"\" && Units.isNumber(e.content)){\r\n\t\t\t\t\t\t\t\t\t\t\tlet write_off_fee = parseFloat(e.content)\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle:\"请输入姓名\",\r\n\t\t\t\t\t\t\t\t\t\t\t\teditable:true,\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholderText:\"为空时即为所有者\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif(e.confirm==true){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(e.content!=\"\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_this.userMark = e.content\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t_this.mkOrderByPhone(vip_type,user_phone,write_off_fee,_this.userMark)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"警告\",\r\n\t\t\t\t\t\t\t\tcontent:e.data['info'],\r\n\t\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tmkOrderByPhone(vip_type,user_phone,write_off_fee,card_user){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl + \"API/userOrder/orderAPI.php\",\r\n\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:\"mk_order_by_phone\",\r\n\t\t\t\t\t\tvip_type:vip_type,\r\n\t\t\t\t\t\tuser_phone:user_phone,\r\n\t\t\t\t\t\twrite_off_fee:write_off_fee,\r\n\t\t\t\t\t\tcard_user:card_user\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tif(e.data['result']){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"核销成功\",\r\n\t\t\t\t\t\t\t\tcontent:e.data['info'],\r\n\t\t\t\t\t\t\t\tshowCancel:false,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"核销失败\",\r\n\t\t\t\t\t\t\t\tcontent:e.data['info'],\r\n\t\t\t\t\t\t\t\tshowCancel:false,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetUserWalletThenReg(vip_type,user_phone,user_wallet){\r\n\t\t\t\tlet title = \"\"\r\n\t\t\t\tif(vip_type=='hair_cut'){\r\n\t\t\t\t\ttitle = \"请输入剪发次数\"\r\n\t\t\t\t}else if(vip_type=='head_health'){\r\n\t\t\t\t\ttitle = \"请输入头疗次数\"\r\n\t\t\t\t}else if(vip_type=='shop_pay'){\r\n\t\t\t\t\ttitle = \"请输入充值金额\"\r\n\t\t\t\t}\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl + \"API/userAPI/userAPI.php\",\r\n\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:\"user_wallet\",\r\n\t\t\t\t\t\tvip_type:vip_type,\r\n\t\t\t\t\t\tuser_phone:user_phone\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tif(e.data['result']==true){\r\n\t\t\t\t\t\t\tuser_wallet = parseFloat(e.data['info']) + user_wallet\r\n\t\t\t\t\t\t\t_this.reOpenVip(vip_type,user_phone,user_wallet)\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"警告\",\r\n\t\t\t\t\t\t\t\tcontent:e.data['info'],\r\n\t\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\treOpenVip(vip_type,user_phone,user_wallet){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl + \"API/userAPI/userAPI.php\",\r\n\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:\"re_open_vip\",\r\n\t\t\t\t\t\tvip_type:vip_type,\r\n\t\t\t\t\t\tuser_phone:user_phone,\r\n\t\t\t\t\t\tuser_wallet:user_wallet\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tif(e.data['result']==true){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"续开成功！\",\r\n\t\t\t\t\t\t\t\tcontent:e.data['info'],\r\n\t\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle:\"失败！\",\r\n\t\t\t\t\t\t\t\tcontent:e.data['info'],\r\n\t\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcloseVIP(vip_type,user_phone){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:getApp().globalData.baseUrl + \"API/userOrder/orderAPI.php\",\r\n\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\ttype:\"close_vip\",\r\n\t\t\t\t\t\tvip_type:vip_type,\r\n\t\t\t\t\t\tuser_phone:user_phone\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle:\"温馨提示\",\r\n\t\t\t\t\t\t\tcontent:\"该会员次数已用完，\" + e.data['info'],\r\n\t\t\t\t\t\t\tshowCancel:false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsurportClick(){\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle:\"温馨提示\",\r\n\t\t\t\t\tcontent:\"本小程序由曲阳脑元素网络科技有限公司提供技术支持，本公司专业开发微信、抖音、快手等平台小程序，以及app,H5网页等，如有需求请致电：15188770006或15630805630\",\r\n\t\t\t\t\tshowCancel:false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.content {\r\n\t\twidth: 750rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: flex-start;\r\n\t\t.swiper-body{\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t\tbackground-color: #55ff7f;\r\n\t\t\t.swiper-view{\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\t.swiper-item-img{\r\n\t\t\t\t\twidth: 750rpx;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.board-view{\r\n\t\t\twidth: 730rpx;\r\n\t\t\theight: 50rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t\tbackground-color: #eaeaea;\r\n\t\t\t.laba-view{\r\n\t\t\t\twidth: 50rpx;\r\n\t\t\t\theight: 50rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: row;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\t.laba-image{\r\n\t\t\t\t\twidth: 30rpx;\r\n\t\t\t\t\theight: 30rpx;\r\n\t\t\t\t\t-webkit-animation: btn-scale 2s infinite linear;\r\n\t\t\t\t\tanimation: btn-scale 2s infinite linear; \r\n\t\t\t\t}\r\n\t\t\t\t@keyframes btn-scale {\r\n\t\t\t\t\t0% {\r\n\t\t\t\t\t\t-webkit-transform: scale(0.8,0.8);\r\n\t\t\t\t\t\ttransform: scale(0.8,0.8);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t50% {\r\n\t\t\t\t\t\t-webkit-transform: scale(1.2,1.2);\r\n\t\t\t\t\t\ttransform: scale(1.2,1.2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t100% {\r\n\t\t\t\t\t\t-webkit-transform: scale(0.8,0.8);\r\n\t\t\t\t\t\ttransform: scale(0.8,0.8);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.text-view{\r\n\t\t\t\tflex: 1;\r\n\t\t\t\theight: 40rpx;\r\n\t\t\t\tline-height: 40rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tcolor: #747474;\r\n\t\t\t}\r\n\t\t}\r\n\t\t.account-option{\r\n\t\t\tmargin-top: 10rpx;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 160rpx;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: row;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: space-around;\r\n\t\t\tbackground-color: #828282;\r\n\t\t\tborder-radius: 15rpx;\r\n\t\t\t.item-view{\r\n\t\t\t\twidth: 120rpx;\r\n\t\t\t\theight: 120rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\t.image{\r\n\t\t\t\t\twidth: 80rpx;\r\n\t\t\t\t\theight: 80rpx;\r\n\t\t\t\t}\r\n\t\t\t\t.title{\r\n\t\t\t\t\twidth: 120rpx;\r\n\t\t\t\t\theight: 40rpx;\r\n\t\t\t\t\tline-height: 40rpx;\r\n\t\t\t\t\tcolor: #ffffff;\r\n\t\t\t\t\tfont-size: 25rpx;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.account-detial{\r\n\t\t\tmargin-top: 10rpx;\r\n\t\t\twidth: 100%;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\talign-items: center;\r\n\t\t\tjustify-content: flex-start;\r\n\t\t\t.scroll-view{\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\t.scroll-content{\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: flex-start;\r\n\t\t\t\t\t.item-view{\r\n\t\t\t\t\t\twidth: 720rpx;\r\n\t\t\t\t\t\theight: 50rpx;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tjustify-content: space-around;\r\n\t\t\t\t\t\tbackground-color: #ffffff;\r\n\t\t\t\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t\t\t\t.item-title{\r\n\t\t\t\t\t\t\twidth: 280rpx;\r\n\t\t\t\t\t\t\theight: 50rpx;\r\n\t\t\t\t\t\t\tmargin-right: 5rpx;\r\n\t\t\t\t\t\t\tbackground-color: #595959;\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\t\t\tcolor: #ffffff;\r\n\t\t\t\t\t\t\tborder-radius: 25rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t.item-value{\r\n\t\t\t\t\t\t\twidth: 430rpx;\r\n\t\t\t\t\t\t\theight: 50rpx;\r\n\t\t\t\t\t\t\tmargin-left: 5rpx;\r\n\t\t\t\t\t\t\tbackground-color: #828282;\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\t\t\tcolor: #ffffff;\r\n\t\t\t\t\t\t\tborder-radius: 25rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.abort-us-view{\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\theight: 350rpx;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tjustify-content: flex-end;\r\n\t\t\t\t\t\t.surport-title{\r\n\t\t\t\t\t\t\theight: 30rpx;\r\n\t\t\t\t\t\t\tline-height: 30rpx;\r\n\t\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t\t\tcolor: #828282;\r\n\t\t\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\t\t\ttext-decoration:underline;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t.surport-com{\r\n\t\t\t\t\t\t\theight: 30rpx;\r\n\t\t\t\t\t\t\tline-height: 30rpx;\r\n\t\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t\t\tcolor: #828282;\r\n\t\t\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\t\t\ttext-decoration:underline;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.qr-code-view{\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\theight: 400rpx;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t\t.qr-show-title{\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\theight: 80rpx;\r\n\t\t\t\t\t\t\tline-height: 80rpx;\r\n\t\t\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t.qr-code{\r\n\t\t\t\t\t\t\twidth: 300rpx;\r\n\t\t\t\t\t\t\theight: 300rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t.logout-view{\r\n\t\t\t\t\t\tmargin-top: 30rpx;\r\n\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\theight: 100rpx;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\tjustify-content: flex-end;\r\n\t\t\t\t\t\t.logout-action{\r\n\t\t\t\t\t\t\twidth: 160rpx;\r\n\t\t\t\t\t\t\theight: 40rpx;\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\tflex-direction: row;\r\n\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\t\t\t\tcolor: #ff0000;\r\n\t\t\t\t\t\t\tborder-bottom: #ff0000 2rpx solid;\r\n\t\t\t\t\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./mine.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./mine.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1683286116133\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}